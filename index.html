// å…¥åŠ›å€¤ã‚’å–å¾—ï¼ˆé †ç•ªã«æ³¨æ„ï¼‰
let targetExplorations = parseInt(args.plainTexts[0]); // å¸Œæœ›æ¢ç´¢å›æ•°
let ownedAPItems = parseInt(args.plainTexts[1]);       // æ‰€æŒAPã‚¢ã‚¤ãƒ†ãƒ æ•°
let ownedShovels = parseInt(args.plainTexts[2]);       // æ‰€æŒã‚¹ã‚³ãƒƒãƒ—æ•°
let shovelPurchaseCount = parseInt(args.plainTexts[3]); // ãƒ€ã‚¤ãƒ¤ã§è³¼å…¥ã—ãŸã„ã‚¹ã‚³ãƒƒãƒ—æ•°

// å®‰å…¨ãªç¯„å›²ã«åˆ¶é™
shovelPurchaseCount = Math.max(0, Math.min(10, shovelPurchaseCount));

// å¿…è¦ã‚¹ã‚³ãƒƒãƒ—æ•°
let neededShovels = Math.max(0, targetExplorations - ownedShovels);

// å®Ÿéš›ã«è³¼å…¥ã§ãã‚‹ã‚¹ã‚³ãƒƒãƒ—æ•°ï¼ˆå¿…è¦æ•°ã¨å¸Œæœ›æ•°ã®å°ã•ã„æ–¹ï¼‰
let buyableShovels = Math.min(shovelPurchaseCount, neededShovels);

// æ®‹ã‚Šã¯ãƒ‰ãƒ­ãƒƒãƒ—ã§ä½œæˆ
let craftableShovels = Math.max(0, neededShovels - buyableShovels);

// ãƒ‰ãƒ­ãƒƒãƒ—ãƒ»è¨ªå•ãƒ»APè¨ˆç®—
let neededDrops = craftableShovels * 10;
let neededVisits = Math.ceil(neededDrops / 2);
let neededAP = neededVisits * 20;

// æ‰€æŒAPã¨ä¸è¶³åˆ†
let ownedAP = ownedAPItems * 120;
let lackingAP = Math.max(0, neededAP - ownedAP);
let extraAPItems = Math.ceil(lackingAP / 120);

// ãƒ€ã‚¤ãƒ¤è¨ˆç®—
let diamondForShovels = buyableShovels * 1000;
let diamondForAP = extraAPItems * 1500;
let totalDiamond = diamondForShovels + diamondForAP;

// Markdownå½¢å¼ã§GitHubå‘ã‘ã«æ•´å½¢
let result = `
# ğŸ’° åˆè¨ˆãƒ€ã‚¤ãƒ¤æ¶ˆè²»: **${totalDiamond}ãƒ€ã‚¤ãƒ¤**

---

## ğŸ” å†…è¨³

- **ã‚¹ã‚³ãƒƒãƒ—è³¼å…¥**: ${diamondForShovels}ãƒ€ã‚¤ãƒ¤ï¼ˆ${buyableShovels}å€‹ã€å¸Œæœ›: ${shovelPurchaseCount}å€‹ï¼‰
- **APè³¼å…¥**: ${diamondForAP}ãƒ€ã‚¤ãƒ¤ï¼ˆã‚¢ã‚¤ãƒ†ãƒ  ${extraAPItems}å€‹ï¼‰

---

## ğŸ“Š è©³ç´°

| é …ç›® | å€¤ |
|------|----|
| å¸Œæœ›æ¢ç´¢å›æ•° | ${targetExplorations} |
| æ‰€æŒã‚¹ã‚³ãƒƒãƒ— | ${ownedShovels} |
| å¿…è¦ã‚¹ã‚³ãƒƒãƒ— | ${neededShovels} |
| ä½œæˆã‚¹ã‚³ãƒƒãƒ— | ${craftableShovels}å€‹ |
| å¿…è¦ãƒ‰ãƒ­ãƒƒãƒ— | ${neededDrops}å€‹ |
| è¨ªå•å›æ•° | ${neededVisits}å› |
| å¿…è¦AP | ${neededAP}AP |
| æ‰€æŒAP | ${ownedAP}APï¼ˆã‚¢ã‚¤ãƒ†ãƒ  ${ownedAPItems}å€‹ï¼‰ |
| ä¸è¶³AP | ${lackingAP}AP |
`;

Script.setShortcutOutput(result);
